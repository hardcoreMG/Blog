---
import FloatingBadge from "@/components/FloatingBadge.astro";
import { getCollection } from "astro:content";
import {
  ArrowDown,
  ArrowRight,
  Code,
  Database,
  Globe,
  Layout,
  Terminal,
} from "lucide-react";
import BaseLayout from "../layouts/BaseLayout.astro";

const title = "ç¡¬æ ¸é©¬å“¥";
const description = "ä¸€ä¸ªçƒ­çˆ±ç¼–ç¨‹çš„å·¥ç¨‹å¸ˆï¼Œå–œæ¬¢ç ”ç©¶æ–°æŠ€æœ¯ï¼Œå–œæ¬¢åˆ†äº«æŠ€æœ¯çŸ¥è¯†ã€‚";
const permalink = Astro.site?.href ?? "";

// Get latest posts
let allPosts = await getCollection("posts");
allPosts = allPosts
  .sort(
    (a, b) =>
      new Date(b.data.publishDate).valueOf() -
      new Date(a.data.publishDate).valueOf()
  )
  .slice(0, 3);

const techStack = [
  {
    name: "å‰ç«¯å¼€å‘",
    icon: Layout,
    items: ["React", "Astro", "TailwindCSS", "TypeScript"],
  },
  {
    name: "åç«¯å¼€å‘",
    icon: Database,
    items: ["Node.js", "Java", "Python", "PostgreSQL", "Redis"],
  },
  {
    name: "è¿ç»´éƒ¨ç½²",
    icon: Globe,
    items: ["Docker", "CI/CD", "Linux", "Nginx"],
  },
];

const featuredProjects = [
  {
    title: "Blog",
    description:
      "åŸºäº Astro 5.0 æ„å»ºçš„é«˜æ€§èƒ½ä¸ªäººåšå®¢ï¼Œé›†æˆ TailwindCSS v4ï¼Œæ”¯æŒæ·±è‰²æ¨¡å¼ä¸ MDX æ¸²æŸ“ã€‚",
    link: "/projects",
    tags: ["Astro", "React", "Tailwind"],
  },
  {
    title: "Homelab Dashboard",
    description:
      "èšåˆæ‰€æœ‰è‡ªæ‰˜ç®¡æœåŠ¡çš„ç»Ÿä¸€ä»ªè¡¨ç›˜ï¼Œæä¾›æœåŠ¡çŠ¶æ€ç›‘æ§ä¸å¿«é€Ÿè®¿é—®å…¥å£ã€‚",
    link: "/projects",
    tags: ["React", "Node.js", "Docker"],
  },
];
---

<BaseLayout
  title={title}
  description={description}
  permalink={permalink}
  current="/"
>
  <!-- Hero Section -->
  <section
    class="px-4 md:px-8 flex flex-col-reverse md:flex-row items-center gap-8 md:gap-16 min-h-[calc(100vh-88px)]"
  >
    <!-- Left Content -->
    <div
      class="flex-1 text-center md:text-left animate-in fade-in slide-in-from-bottom-8 duration-1000"
    >
      <div
        class="inline-flex items-center gap-2 px-3 py-1 rounded-full bg-primary/10 text-primary text-sm font-medium mb-6"
      >
        <Terminal className="w-4 h-4" />
        <span>Hello World</span>
      </div>

      <h1
        class="font-bold tracking-tight text-gray-900 dark:text-white mb-6 text-4xl! md:text-6xl! leading-tight!"
      >
        ä½ å¥½<span class="animate-wave inline-block">ğŸ‘‹</span>ï¼Œæˆ‘æ˜¯<br />
        <span
          class="bg-clip-text text-transparent bg-linear-to-r from-primary to-cyan-600"
        >
          ç¡¬æ ¸é©¬å“¥
        </span>
      </h1>

      <p
        class="text-xl text-gray-600 dark:text-gray-300 leading-relaxed mb-8 max-w-2xl mx-auto md:mx-0"
      >
        æˆ‘æ˜¯ä¸€ä¸ªçƒ­çˆ±ç¼–ç¨‹çš„å·¥ç¨‹å¸ˆï¼Œä¸“æ³¨äºå…¨æ ˆå¼€å‘ä¸äº‘è®¡ç®—ã€‚å–œæ¬¢ç ”ç©¶æ–°æŠ€æœ¯ï¼ŒæŠ˜è…¾
        Homelabï¼Œå¹¶çƒ­è¡·äºåˆ†äº«æŠ€æœ¯çŸ¥è¯†ã€‚
      </p>

      <div
        class="flex flex-col sm:flex-row items-center justify-center md:justify-start gap-4"
      >
        <a
          href="/blog"
          class="inline-flex items-center justify-center gap-2 px-6 py-3 rounded-full bg-primary text-white font-sans font-medium no-underline hover:bg-primary/90 transition-all duration-300 hover:scale-105 hover:shadow-lg hover:shadow-primary/25"
        >
          é˜…è¯»åšå®¢
          <ArrowRight className="w-4 h-4" />
        </a>
        <a
          href="/about"
          class="inline-flex items-center justify-center gap-2 px-6 py-3 rounded-full bg-gray-100 dark:bg-gray-800 text-gray-900 dark:text-white font-sans font-medium no-underline hover:bg-gray-200 dark:hover:bg-gray-700 transition-all duration-300"
        >
          å…³äºæˆ‘
        </a>
      </div>
    </div>

    <!-- Right Image -->
    <div
      class="relative flex-1 w-full max-w-[500px] animate-in fade-in zoom-in duration-1000 delay-200 fill-mode-backwards"
    >
      <div
        class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-3/4 h-3/4 bg-primary/20 rounded-full blur-[60px] -z-10"
      >
      </div>
      <div class="relative group">
        <img
          class="w-full h-auto transform transition duration-700 group-hover:scale-105 group-hover:-rotate-2 drop-shadow-2xl"
          alt="Hero Illustration"
          src="/assets/home-illustration.webp"
          width="550"
          height="466"
        />
      </div>
      <FloatingBadge position="top-right" delay={500}>
        <Code className="w-6 h-6 text-primary" />
      </FloatingBadge>
      <FloatingBadge position="bottom-left" delay={1500}>
        <Terminal className="w-6 h-6 text-cyan-600" />
      </FloatingBadge>
    </div>
  </section>

  <!-- Scroll Hint Animation -->
  <div
    class="hidden md:flex justify-center -mt-24 relative z-10 animate-bounce"
  >
    <a
      href="#latest-posts"
      aria-label="Scroll to content"
      class="p-3 rounded-full bg-white/50 dark:bg-white/5 backdrop-blur-md border border-gray-200 dark:border-white/10 text-gray-500 dark:text-gray-400 hover:text-primary hover:border-primary/50 transition-all duration-300 shadow-lg"
    >
      <ArrowDown className="w-6 h-6" />
    </a>
  </div>

  <div class="w-full max-w-5xl mx-auto">
    <!-- Latest Posts Section -->
    <section id="latest-posts" class="px-4 md:px-8 py-16">
      <div class="flex items-center justify-between mb-10">
        <h2 class="text-3xl font-bold text-gray-900 dark:text-white">
          æœ€æ–°æ–‡ç« 
        </h2>
        <a
          href="/blog"
          class="text-primary font-medium hover:underline inline-flex items-center gap-1"
        >
          æŸ¥çœ‹æ›´å¤š <ArrowRight className="w-4 h-4" />
        </a>
      </div>
      <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
        {
          allPosts.map((post) => (
            <a href={`/blog/${post.data.slug}`} class="group block h-full">
              <article class="bg-white dark:bg-white/5 rounded-2xl overflow-hidden border border-gray-200 dark:border-white/10 hover:border-primary dark:hover:border-primary/50 transition-all duration-300 hover:shadow-lg hover:-translate-y-1 h-full flex flex-col">
                <div class="p-6 flex flex-col h-full">
                  <div class="flex items-center gap-2 text-sm text-gray-500 dark:text-gray-400 mb-3">
                    <time datetime={post.data.publishDate.toISOString()}>
                      {post.data.publishDate.toLocaleDateString("zh-CN")}
                    </time>
                  </div>
                  <h3 class="text-xl font-bold text-gray-900 dark:text-white mb-3 group-hover:text-primary transition-colors line-clamp-2">
                    {post.data.title}
                  </h3>
                  <p class="text-gray-600 dark:text-gray-400 text-sm line-clamp-3 flex-1">
                    {post.data.description}
                  </p>
                </div>
              </article>
            </a>
          ))
        }
      </div>
    </section>

    <!-- Tech Stack Section -->
    <section class="px-4 md:px-8 py-16">
      <div
        class="bg-gray-50 dark:bg-white/5 rounded-3xl p-8 md:p-12 border border-gray-100 dark:border-white/10"
      >
        <div class="text-center mb-12">
          <h2 class="text-3xl font-bold text-gray-900 dark:text-white mb-4">
            æŠ€æœ¯æ ˆ
          </h2>
          <p class="text-gray-600 dark:text-gray-400">å·¥æ¬²å–„å…¶äº‹ï¼Œå¿…å…ˆåˆ©å…¶å™¨</p>
        </div>
        <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
          {
            techStack.map((category) => (
              <div class="bg-white dark:bg-gray-900/50 p-6 rounded-2xl shadow-sm border border-gray-100 dark:border-white/5 hover:border-primary/50 transition-colors">
                <div class="flex items-center gap-3 mb-4">
                  <div class="p-2 bg-primary/10 rounded-lg text-primary">
                    <category.icon className="w-5 h-5" />
                  </div>
                  <h3 class="font-bold text-lg text-gray-900 dark:text-white">
                    {category.name}
                  </h3>
                </div>
                <div class="flex flex-wrap gap-2">
                  {category.items.map((item) => (
                    <span class="px-2 py-1 text-sm bg-gray-100 dark:bg-white/10 text-gray-700 dark:text-gray-300 rounded-md font-medium">
                      {item}
                    </span>
                  ))}
                </div>
              </div>
            ))
          }
        </div>
      </div>
    </section>

    <!-- Featured Projects Section -->
    <section class="px-4 md:px-8 py-16 mb-12">
      <div class="flex items-center justify-between mb-10">
        <h2 class="text-3xl font-bold text-gray-900 dark:text-white">
          ç²¾é€‰é¡¹ç›®
        </h2>
        <a
          href="/projects"
          class="text-primary font-medium hover:underline inline-flex items-center gap-1"
        >
          æŸ¥çœ‹å…¨éƒ¨ <ArrowRight className="w-4 h-4" />
        </a>
      </div>
      <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
        {
          featuredProjects.map((project) => (
            <a
              href={project.link}
              class="group block bg-white dark:bg-white/5 rounded-2xl p-6 border border-gray-200 dark:border-white/10 hover:border-primary dark:hover:border-primary/50 transition-all duration-300 hover:shadow-lg"
            >
              <h3 class="text-xl font-bold text-gray-900 dark:text-white mb-2 group-hover:text-primary transition-colors">
                {project.title}
              </h3>
              <p class="text-gray-600 dark:text-gray-400 mb-4">
                {project.description}
              </p>
              <div class="flex gap-2">
                {project.tags.map((tag) => (
                  <span class="px-2 py-1 text-xs bg-primary/10 text-primary rounded-full font-medium">
                    {tag}
                  </span>
                ))}
              </div>
            </a>
          ))
        }
      </div>
    </section>
  </div>
</BaseLayout>
